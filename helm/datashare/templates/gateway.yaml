{{- if .Values.istio.enabled }}
apiVersion: networking.istio.io/v1alpha3
kind: Gateway
metadata:
  name:  {{ .Values.istio.gateway.gateway_name }}
spec:
  selector:
    istio: {{ .Values.istio.gateway.selector }}
  servers:
    - port:
        number: {{ (first .Values.istio.gateway.servers).port.number }}
        name: {{ (first .Values.istio.gateway.servers).port.name }}
        protocol: {{ (first .Values.istio.gateway.servers).port.protocol }}
      hosts:
        {{- range (first .Values.istio.gateway.servers).hosts }}
        - {{ . }}
        {{- end }}
  {{- end }}
